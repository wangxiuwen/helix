# Gemini 3 Pro Image æ¨¡å‹è°ƒç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†åœ¨ **OpsClaw** é¡¹ç›®ä¸­è°ƒç”¨ Google `gemini-3-pro-image` (Imagen 3) æ¨¡å‹çš„æ–¹æ³•ã€‚æœ¬é¡¹ç›®å·²å¯¹è¯¥æ¨¡å‹è¿›è¡Œäº† OpenAI åè®®çš„å®Œå…¨å…¼å®¹å°è£…ï¼Œå¹¶æ‰©å±•æ”¯æŒäº†åŸç”Ÿçš„æ‘„å½±å®½é«˜æ¯”ã€äººç‰©ç”Ÿæˆå®‰å…¨ç­–ç•¥ï¼Œä»¥åŠ**å›¾ç”Ÿå›¾ (Image-to-Image)** åŠŸèƒ½ã€‚

## 1. åŸºç¡€ä¿¡æ¯

*   **æ¨¡å‹ ID**: `gemini-3-pro-image` (æ”¯æŒåˆ«å `gemini-3-pro-image-preview`)
*   **æ¥å£è·¯å¾„**:
    *   `/v1/images/generations` (æ–‡ç”Ÿå›¾ Text-to-Image)
    *   `/v1/images/edits` (å›¾ç”Ÿå›¾ Image-to-Image / ç¼–è¾‘)
    *   `/v1/chat/completions` (å…¼å®¹æ¨¡å¼)
*   **åº•å±‚æ¨¡å‹**: Google Imagen 3 (Gemini Native)

---

## 2. æ–‡ç”Ÿå›¾ (Text-to-Image)

è°ƒç”¨ `/v1/images/generations`ï¼Œæ”¯æŒä»¥ä¸‹å‚æ•°ï¼š

### 2.1 ç”»å¹…ä¸å®½é«˜æ¯” (Size / Aspect Ratio)

`size` å‚æ•°æ”¯æŒä¸¤ç§è¾“å…¥æ ¼å¼ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§£æå¹¶æ˜ å°„åˆ° Gemini æ”¯æŒçš„æ ‡å‡†æ¯”ä¾‹ï¼š

1.  **ç›´æ¥è¾“å…¥æ¯”ä¾‹ (æ¨è)**ï¼šå¦‚ `"16:9"`, `"4:3"`, `"1:1"`ã€‚è¿™ç§æ–¹å¼æœ€ç›´è§‚ï¼Œä¸” 100% å‡†ç¡®æ˜ å°„ã€‚
2.  **è¾“å…¥åˆ†è¾¨ç‡ (å…¼å®¹)**ï¼šå¦‚ `"1920x1080"`, `"1024x1024"`ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—å…¶å®½é«˜æ¯”ï¼ˆä¾‹å¦‚ 1920/1080 â‰ˆ 1.77ï¼‰ï¼Œå¹¶å°†å…¶å½’ä¸€åŒ–ä¸ºæœ€æ¥è¿‘çš„æ ‡å‡†æ¯”ä¾‹ï¼ˆ16:9ï¼‰ã€‚

**âš ï¸ é‡è¦è¯´æ˜**ï¼šGemini (Imagen 3) **ä¸æ”¯æŒè‡ªå®šä¹‰ä»»æ„åƒç´ å¤§å°**ã€‚
æ— è®ºæ‚¨åœ¨ `size` ä¸­è¾“å…¥ `"1920x1080"` è¿˜æ˜¯ `"16:9"`ï¼Œæœ€ç»ˆç”Ÿæˆçš„**å®é™…ç‰©ç†åˆ†è¾¨ç‡**ä»…ç”±ä»¥ä¸‹ä¸¤ä¸ªå› ç´ å†³å®šï¼š
1.  **å®½é«˜æ¯”**ï¼ˆç”± `size` è§£æå¾—å‡ºï¼‰
2.  **ç”»è´¨ç­‰çº§**ï¼ˆç”± `quality` å‚æ•°å†³å®šï¼š`1k`/`2k`/`4k`ï¼‰

*ç¤ºä¾‹ï¼šè¾“å…¥ `size: "1920x1080"` (16:9) ä¸” `quality: "standard"` (1k)ï¼Œå®é™…ç”Ÿæˆçš„å›¾ç‰‡å°ºå¯¸ä¸º **1376x768** (16:9 ä¸‹çš„ 1K åˆ†è¾¨ç‡)ï¼Œè€Œä¸æ˜¯ 1920x1080ã€‚*

| ç›®æ ‡æ¯”ä¾‹ | é€‚ç”¨åœºæ™¯ | `size` å‚æ•°ç¤ºä¾‹ (åˆ†è¾¨ç‡) | å¤‡æ³¨ |
| :--- | :--- | :--- | :--- |
| **16:9** | å®½å±ã€ç”µå½±æ„Ÿ | `1920x1080`, `1280x720` | æ ‡å‡†å®½å± |
| **9:16** | æ‰‹æœºå£çº¸ã€Stories | `1080x1920`, `720x1280` | ç«–å±å…¨å± |
| **1:1** | å¤´åƒã€Instagram | `1024x1024` | é»˜è®¤æ¯”ä¾‹ |
| **4:3** | ä¼ ç»Ÿæ‘„å½±ã€æ˜¾ç¤ºå™¨ | `1024x768`, `800x600` | |
| **3:4** | çºµå‘æ‘„å½± | `768x1024`, `600x800` | |
| **21:9** | è¶…å®½å±ã€ç”µå½± | `2560x1080` | ç”µå½±é“¶å¹• |
| **3:2** | **[æ–°å¢]** å…¨ç”»å¹…å•å | `1500x1000` | ç»å…¸æ‘„å½±æ¯”ä¾‹ |
| **2:3** | **[æ–°å¢]** ç«–æ„å›¾æ‘„å½± | `1000x1500` | æµ·æŠ¥ã€ç«‹ç»˜ |
| **5:4** | **[æ–°å¢]** å¤§ç”»å¹… | `1280x1024` | è‰ºæœ¯æ‘„å½± |
| **4:5** | **[æ–°å¢]** ç¤¾äº¤åª’ä½“ç«–å›¾ | `1024x1280` | Ins æœ€ä½³å±•ç¤ºæ¯”ä¾‹ |

> **æç¤º**: æ‚¨ä¸éœ€è¦ç²¾ç¡®åŒ¹é…åƒç´ å€¼ï¼Œåªéœ€å®½é«˜æ¯”æ¥è¿‘ä¸Šè¿°æ¯”ä¾‹ï¼ˆå®¹å·® 0.05ï¼‰å³å¯è‡ªåŠ¨è¯†åˆ«ã€‚

### 2.2 ç”»è´¨ä¸åˆ†è¾¨ç‡ (Quality)

é€šè¿‡ `quality` å‚æ•°æ§åˆ¶ç”Ÿæˆçš„ç²¾ç»†åº¦ã€‚

| å‚æ•°å€¼ (`quality`) | å¯¹åº” Gemini è®¾ç½® | è¯´æ˜ |
| :--- | :--- | :--- |
| `standard` / `1k` | Image Size: `1K` | ç”Ÿæˆé€Ÿåº¦å¿«ï¼Œé€‚åˆå¿«é€ŸéªŒè¯ (é»˜è®¤) |
| `medium` / `2k` | Image Size: `2K` | å¹³è¡¡è´¨é‡ä¸é€Ÿåº¦ |
| `hd` / `4k` | Image Size: `4K` | **æé«˜ç”»è´¨**ï¼Œç»†èŠ‚æœ€ä¸°å¯Œï¼Œè€—æ—¶ç¨é•¿ |

#### åˆ†è¾¨ç‡å¯¹ç…§è¡¨ (Gemini 3 Pro Image)

| å®½é«˜æ¯” | 1K åˆ†è¾¨ç‡ (Standard) | 2K åˆ†è¾¨ç‡ (Medium) | 4K åˆ†è¾¨ç‡ (HD) |
| :--- | :--- | :--- | :--- |
| **1:1** | 1024x1024 | 2048x2048 | 4096x4096 |
| **2:3** | 848x1264 | 1696x2528 | 3392x5056 |
| **3:2** | 1264x848 | 2528x1696 | 5056x3392 |
| **3:4** | 896x1200 | 1792x2400 | 3584x4800 |
| **4:3** | 1200x896 | 2400x1792 | 4800x3584 |
| **4:5** | 928x1152 | 1856x2304 | 3712x4608 |
| **5:4** | 1152x928 | 2304x1856 | 4608x3712 |
| **9:16** | 768x1376 | 1536x2752 | 3072x5504 |
| **16:9** | 1376x768 | 2752x1536 | 5504x3072 |
| **21:9** | 1584x672 | 3168x1344 | 6336x2688 |

### è°ƒç”¨ç¤ºä¾‹ (Python)

```python
import requests

url = "http://localhost:8045/v1/images/generations"
headers = {
    "Content-Type": "application/json",
    "Authorization": "Bearer <token>"
}
data = {
    "model": "gemini-3-pro-image",
    "prompt": "A futuristic city with flying cars, cinematic lighting, 8k",
    "size": "16:9",
    "quality": "hd",
    "n": 1
}

response = requests.post(url, headers=headers, json=data)
print(response.json())
```

## 3. å›¾ç”Ÿå›¾ (Image-to-Image / Edits) ğŸ”¥ [æ–°å¢]

è°ƒç”¨ `/v1/images/edits` æ¥å£ï¼Œæ”¯æŒé€šè¿‡å‚è€ƒå›¾ç”Ÿæˆã€‚

*   **Content-Type**: `multipart/form-data`
*   **æ”¯æŒå¤šå›¾**: å¯åŒæ—¶ä¸Šä¼ å¤šå¼ å‚è€ƒå›¾ã€‚

### è¡¨å•å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| `prompt` | String | æ˜¯ | æ–‡æœ¬æç¤ºè¯ |
| `image1`...`imageN` | File | æ˜¯ | **å‚è€ƒå›¾æ–‡ä»¶**ã€‚æ”¯æŒ `image1`, `image2` ç­‰ä»»æ„åç§°çš„æ–‡ä»¶å­—æ®µ (é standard `image` æˆ– `mask`)ã€‚ |
| `image` | File | å¦ | (å…¼å®¹ OpenAI æ ‡å‡†) ä¸»å›¾åƒ |
| `mask` | File | å¦ | (å…¼å®¹ OpenAI æ ‡å‡†) é®ç½©å›¾åƒ |
| `aspect_ratio` | String | å¦ | æ˜¾å¼æŒ‡å®šæ¯”ä¾‹ï¼Œå¦‚ `"16:9"` (ä¼˜å…ˆçº§é«˜äº `size`) |
| `image_size` | String | å¦ | æ˜¾å¼æŒ‡å®šåˆ†è¾¨ç‡ï¼Œå¦‚ `"2K"`, `"4K"` (ä¼˜å…ˆçº§é«˜äº `quality`) |
| `style` | String | å¦ | é£æ ¼æè¿°ï¼Œä¼šè‡ªåŠ¨è¿½åŠ åˆ° Prompt ä¸­ |
| `n` | Integer | å¦ | ç”Ÿæˆæ•°é‡ (é»˜è®¤ 1) |
| `model` | String | å¦ | æ¨¡å‹åç§° (é»˜è®¤ `gemini-3-pro-image`) |

### è°ƒç”¨ç¤ºä¾‹ (Python)

```python
import requests

url = "http://localhost:8045/v1/images/edits"
headers = {
    "Authorization": "Bearer <token>"
}
# æ”¯æŒå¤šå¼ å‚è€ƒå›¾ (image1, image2, ...)
files = {
    "image1": open("/path/to/reference_1.jpg", "rb"),
    "image2": open("/path/to/reference_2.jpg", "rb")
}
data = {
    "prompt": "A cyberpunk city street based on this layout",
    "aspect_ratio": "16:9",
    "image_size": "4K",
    "style": "watercolor"
}

response = requests.post(url, headers=headers, files=files, data=data)
print(response.json())
```

---

## 4. åç¼€é­”æ³• (Magic Suffix)

é™¤äº†æ ‡å‡†çš„ JSON å‚æ•°å¤–ï¼Œæœ¬é¡¹ç›®è¿˜æ”¯æŒåœ¨ **æ¨¡å‹åç§°** ä¸­ç›´æ¥æŒ‡å®šå‚æ•°ï¼ˆæ–¹ä¾¿åœ¨ä¸æ”¯æŒè‡ªå®šä¹‰å‚æ•°çš„å®¢æˆ·ç«¯ä¸­ä½¿ç”¨ï¼‰ã€‚

**æ ¼å¼**: `gemini-3-pro-image-{æ¯”ä¾‹}-{ç”»è´¨}`

*   **æ¯”ä¾‹åç¼€**: `-16x9`, `-9x16`, `-4x3`, `-3x4`, `-3x2`, `-2x3` ç­‰ã€‚
*   **ç”»è´¨åç¼€**: `-4k` (å¯¹åº” hd), `-2k` (å¯¹åº” medium)ã€‚

**ç¤ºä¾‹**:
ä½¿ç”¨æ¨¡å‹å `gemini-3-pro-image-16x9-4k` ç­‰åŒäºï¼š
*   `size`: "1920x1080" (16:9)
*   `quality`: "hd"

> **æ³¨æ„**: å¦‚æœ JSON Body ä¸­æ˜¾å¼ä¼ é€’äº† `size` æˆ– `quality`ï¼ŒBody ä¸­çš„å‚æ•°ä¼˜å…ˆçº§ **é«˜äº** æ¨¡å‹ååç¼€ã€‚

---

## 5. å¸¸è§é—®é¢˜

1.  **Q: ä¸ºä»€ä¹ˆæˆ‘è®¾ç½®äº† `size: "1234x5678"` ä½†ç”Ÿæˆçš„å›¾ç‰‡æ¯”ä¾‹ä¸å¯¹ï¼Ÿ**
    *   **A**: ç³»ç»Ÿä¼šå°†æ‚¨è¾“å…¥çš„å°ºå¯¸å½’ä¸€åŒ–ä¸º Gemini æ”¯æŒçš„ 10 ç§æ ‡å‡†æ¯”ä¾‹ï¼ˆè§ 2.1 èŠ‚ï¼‰ã€‚å¦‚æœæ‚¨çš„æ¯”ä¾‹éå¸¸ç‰¹æ®Šä¸”ä¸åŒ¹é…ä»»ä½•æ ‡å‡†æ¯”ä¾‹ï¼ˆå®¹å·® > 0.05ï¼‰ï¼Œç³»ç»Ÿå°†å›é€€åˆ°é»˜è®¤çš„ **1:1**ã€‚å»ºè®®ç›´æ¥ä½¿ç”¨ç¤ºä¾‹ä¸­çš„åˆ†è¾¨ç‡ã€‚

2.  **Q: æ”¯æŒä¸€æ¬¡ç”Ÿæˆå¤šå¼ å›¾ç‰‡å—ï¼Ÿ**
    *   **A**: æ”¯æŒã€‚è™½ç„¶ Gemini ä¸Šæ¸¸å•æ¬¡è¯·æ±‚é™åˆ¶ç”Ÿæˆ 1 å¼ ï¼Œä½† OpsClaw ä»£ç†å±‚ä¼šè‡ªåŠ¨å¹¶å‘å¤„ç† `n` å‚æ•°ã€‚ä¾‹å¦‚è®¾ç½® `n: 4`ï¼Œç³»ç»Ÿä¼šå¹¶è¡Œå‘èµ· 4 ä¸ªè¯·æ±‚å¹¶åˆå¹¶ç»“æœè¿”å›ã€‚

3.  **Q: `person_generation` å‚æ•°æŠ¥é”™ï¼Ÿ**
    *   **A**: è¯·ç¡®ä¿è¯¥å‚æ•°ä½äº JSON çš„**æ ¹å±‚çº§**ï¼ˆä¸ `prompt`, `model` åŒçº§ï¼‰ï¼Œè€Œä¸æ˜¯åµŒå¥—åœ¨å…¶ä»–å­—æ®µä¸­ã€‚æ”¯æŒ `snake_case` (`person_generation`) å’Œ `camelCase` (`personGeneration`)ã€‚
